{% load myfilter %}
{% include "inputGene.html" %}

<div class="card mb-3">
  <div class="card-header">
    <i class="fa fa-fw fa-table"></i> Resultsã€€&#40;Corrected Method: 
    {% if corrected == '1' %}
      Bonferroni-corrected, cutoff=10<sup>-{{ cutoff }}</sup> &#41;
    {% else %}
      FDR (False Discovery Rate), &alpha;=10<sup>-{{ cutoff }}</sup> &#41;;
    {% endif %}
  </div>
  {% for ftype,fdata in enrich_value.items %}
    {{ftype}}
    <table class='table p-1' id="{{ftype}}_enrich_table">
      <thead>
        <th class="text-left" style="width:30%;">Name</th>
        <th class="text-left" style="width:10%;">Paper</th>
        <th class="text-right" style="width:20%;">Intersects / <br># of input genes</th>
        <th class="text-right" style="width:25%;">Histone Modification / <br># of genes in the yeast genome</th>
        {% if ftype == 'histone' %}
          <th class="text-right" style="width:9%;">P-value</th>
          <th class="text-right" style="width:6%;">Side</th>
        {% else %}
          <th class="text-right" style="width:15%;">P-value</th>
        {% endif %}
      </thead>
      <tbody>
        {% for value in fdata %}
          <tr>
            <td class="text-left">{{ value.feature }} {{ value.enrich_type|now_type}}</td>
            <td class="text-left">{{ value.paper }}</td>
            <td class="text-right">{{ value.intersectOfgene.0 }}/{{ value.intersectOfgene.1 }}({{ value.intersectOfgene.0|calc_percent:value.intersectOfgene.1 }})</td>
            <td class="text-right">{{ value.intersectOfgene.2 }}/{{ 6572 }}({{ value.intersectOfgene.2|calc_percent:6572 }})</td>
            <td class="text-right">{{ value.pvalue.0|format_pvalue }}</td>
            {% if ftype == 'histone' %}
              <td class="text-right">{{ value.pvalue.1|pvalue_type }}</td>
            {% endif %}
          </tr>   
        {% endfor %}
      </tbody>
    </table>
  {% endfor %}
</div>
