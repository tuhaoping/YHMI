{% extends "base.html" %}

{% block content %}
  <div class="mb-0 mt-4">
    <span class="block-title"><i class="fa fa-file"></i> Identify Enriched/Depleted Histone Modifications in Your Gene List </span>
  </div>
  <hr class="mt-2">

  <!-- Gene Input-->
  <form id="inputForm">
  <div class="row row-input show" id="div-input">
    <!-- Gene Input Set-->
    <div class="col-lg-3 col-md-3 col-12">
      <div class="card mb-3">
        <div class="card-header" style="height:51px;">
          <span style="font-size: 1.3rem;"><i class="fa fa-search"></i> Input Your Gene List</span>
          <a id="a-eg" data-toggle="collapse" data-target="#example-btn-div" href="#">(e.g.)</a>
        </div>
        
        <div class="card-body" style="height:500px; position:relative;" id="div-genetext">
          <div class="collapse" id="example-btn-div">
            <div class="card card-body">
              <div class="btn btn-sm" onclick="showExample(1)">0-1</div>
              <div class="btn btn-sm" onclick="showExample(2)">1-4</div>
              <div class="btn btn-sm" onclick="showExample(3)">4-16</div>
              <div class="btn btn-sm" onclick="showExample(4)">16-50</div>
              <div class="btn btn-sm" onclick="showExample(5)">50+</div>
            </div>
          </div>
          <textarea id="inputTextArea" class="form-control" style="height:100%; resize:none; overflow-x:hidden;"></textarea>
        </div>
      </div>
    </div>
    <!-- Gene Input Filter-->
    <div class="col-lg-9 col-md-9 col-12">
      <div class="card mb-3">
        <div class="card-header" style="height:51px;">
          <span style="font-size: 1.3rem;"><i class="fa fa-wrench"></i> Define Genes With Specific Histone Modifications &nbsp;</span>
            <!--
            <label class="switch m-0">
              <input type="checkbox" id="switch">
              <span class="slider round"></span>
            </label>
            -->
            <!--
            <div class="text-right d-inline float-right">
              Composition Option:
              <select id="Composition-select" disabled>
                <option value=" AND ">Intersection</option>
                <option value=" OR ">Union</option>
              </select>
            </div>
            -->
        </div>
        <div class="card-body p-0" style="height:500px;" id="div-setting">
          <div id="custom-setting-accordion" role="tablist">
            {% for MainClass,Data in filter_data.items %}
              {% if MainClass != 'TF'%}
                <div class="card">
                  <div class="card-header" role="tab" id="{{MainClass}}-setting" data-toggle="collapse" data-target="#{{MainClass}}-setting-collapse">
                    <h6 class="mb-0" style="color:#007bff">{{ MainClass }}</h6>
                  </div>

                  <div id="{{MainClass}}-setting-collapse" class="collapse" role="tabpanel" aria-labelledby="{{MainClass}}-setting" data-parent="#custom-setting-accordion" >
                    <div class="card-body p-0" style="height:300px; overflow-y:scroll;">
                      {% for SubClass,Feature in Data.items %}
                        <div class="subtitle">{{ SubClass }}</div>
                        <div class="pl-3 pr-3">
                          <table class="table">
                            <thead>
                              <tr>
                                <th></th>
                                <th colspan="2">Promoter</th>
                                <th colspan="2">Coding Region</th>
                              </tr>
                              <tr>
                                <th></th>
                                <th>enriched(&#62;=)</th>
                                <th>depleted(&#60;=)</th>
                                <th>enriched(&#62;=)</th>
                                <th>depleted(&#60;=)</th>
                              </tr>
                            </thead>
                            <tbody>
                            {% for id,f in Feature %}
                              <tr class="tr-custom-setting" id="fs{{ id }}">
                                <td>{{ f }}</td>
                                <td>
                                  <div>
                                    <input type="text" class="form-control text-center" value="1.0" data-prevalue="1.0" style="width:100%;">
                                    <span class="fclass">pro_en</span>
                                  </div>
                                </td>
                                <td>
                                  <div>
                                    <input type="text" class="form-control text-center" value="-1.0" data-prevalue="-1.0" style="width:100%;">
                                    <span class="fclass">pro_de</span>
                                  </div>
                                </td>
                                <td>
                                  <div>
                                    <input type="text" class="form-control text-center" value="1.0" data-prevalue="1.0" style="width:100%;">
                                    <span class="fclass">cds_en</span>
                                  </div>
                                </td>
                                <td>
                                  <div>
                                    <input type="text" class="form-control text-center" value="-1.0" data-prevalue="-1.0" style="width:100%;">
                                    <span class="fclass">cds_de</span>
                                  </div>
                                </td>
                              </tr>
                            {% endfor %}
                            </tbody>
                          </table>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                </div>  
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ./Gene Input-->

  <hr class="mt-0 mb-2">
  <span style="font-size: 1.3rem; text-decoration:underline;">
    <i class="fa fa-gear"></i> Specify P-value Cutoff for Mulitple Hypothese Testing
  </span>
  
  <div class="row mt-1" id="div-corrected">
    <div class="col-lg-8 col-6">
      <label class="container">Bonferroni-corrected p-value: cutoff=10<sup>-</sup>
        <input type="radio" checked="checked" name="corrected" value="1">
        <span class="checkmark"></span>
        <input type="text" class="form-control d-inline" style="width:30px;" value="2">
      </label>
      <label class="container">FDR (False Discovery Rate): &alpha;=10<sup>-</sup>
        <input type="radio" name="corrected" value="2">
        <span class="checkmark"></span>
        <input type="text" class="form-control d-inline" disabled style="width:30px;" value="2">
      </label>
    </div>
    <div class="col-lg-4 col-6 text-right">
      <div class="btn btn-primary w-10 mt-4" id="btn-reset">
        Reset <i class="fa fa-fw fa-refresh"></i></div>
      <div class="btn btn-primary w-10 mt-4" id="btn-send">
        Submit <i class="fa fa-fw fa-paper-plane"></i></div>
    </div>
  </div>
  </form>
  <hr class="mt-2 mb-5">


{% endblock content %}

<!--
{% block customModal %}
  {% include "custom-setting.html" %}
{% endblock customModal %}
-->